{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "spec.json",
    "title": "ABR Specification",
    "description": "The specification for ABR - a contract between the ABR Model, Renderer, and all UIs. The actual spec will likely be generated from the ABR Unity project.",
    "type": "object",


    "required": ["version"],


    "properties": {
        "version": {
            "type": "string",
            "description": "Version of the spec (semantic versioning, incremented when a change is made to the spec)",
            "const": "0.0.0"
        },
        "plates": {
            "type": "array",
            "description": "Plates (layers) that the ABR Rendering engine implements",
            "items": {"$ref": "#/definitions/Plate"}
        }
    },


    "definitions": {
        "Plate": {
            "type": "object",
            "description": "A Plate in ABR (e.g. a SurfacePlate) which becomes a data impression when instantiated",
            "properties": {
                "plateType": {
                    "type": "string",
                    "description": "String representation of a C# type"
                },
                "version": {
                    "type": "string",
                    "description": "Version of the plate (semantic versioning, increment every time you change this plate)"
                },
                "inputs": {
                    "description": "The inputs available to this plate, associated with their types",
                    "patternProperties": {
                        "^[a-zA-Z ]+": {"$ref": "#/definitions/Input"}
                    }
                }
            }
        },

        "Input": {
            "type": "object",
            "description": "A single input to a plate",
            "properties": {
                "inputType": {
                    "type": "string",
                    "description": "The type of this input (corresponds to a C# type, e.g. `ColormapVisAsset`)"
                },
                "inputGroup": {
                    "type": "string",
                    "description": "The group that this input belongs to (e.g. `Colormap` and `Color Variable` belong to the `Color` group)"
                }
            }
        },

        "InputDescriptors": {
            "Glyphs": {
                "type": "object",
                "description": "Inputs for a field of glyphs",
                "properties": {
                    "Key Data": {
                        "type": "object",
                        "description": "The data that provides the structure for this object",
                        "properties": {
                            "Key Data": {
                                "properties": {
                                    "inputType": { "const": "PointData" },
                                    "inputGroup": { "const": "Key Data" }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}